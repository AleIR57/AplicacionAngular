
<div class = "container">


  <div class="card">
      <div class="card-header titulo-tarjeta">
          Editar producto
          <div (click)="desplegable=!desplegable">
          <i class="fas fa-caret-down" *ngIf="!desplegable"></i>
          <i class="fas fa-caret-up" *ngIf="desplegable"></i>
        </div>
        

      </div>
      <div class="card-body" *ngIf="desplegable">
          <form ngNativeValidate [formGroup] = "formularioDeProductos" (ngSubmit)="enviarDatos()"> 
              <div class="mb-3">
                <label for="">Nombre: </label>
                <input required type="text"
                  class="form-control" formControlName="nombre" name="" id="nombre"  placeholder="Escribe el nombre del producto">
              </div>
  
              <div class="mb-3">
                  <label for="">Marca: </label>
                  <input required type="text"
                    class="form-control" formControlName="marca" name="" id="marca" placeholder="Escribe la marca del producto">
                </div>
  
              <div class="mb-3">
                <label for="">Modelo: </label>
                <input required type="text"
                  class="form-control" formControlName="modelo" name="" id="modelo" aria-describedby="helpId" placeholder="Escribe el modelo del producto">
              </div>
  
              <div class="mb-3">
                  <label for="">Descripción: </label>
                  <input type="text"
                    class="form-control" formControlName="descripcion" name="" id="descripcion" aria-describedby="helpId" placeholder="Haz una descripción sobre el producto">
                </div>
              
              <div class="mb-3">
                <label for="">Categoría:</label>
                <select class="form-select" aria-label="Default select example" formControlName = "idCategoria" >
                  <option selected>Selecciona una categoría</option>
                  <option *ngFor="let categoria of Categorias; let iControl=index" value="{{categoria.idCategoria}}">{{categoria.nombre}}</option>
                </select>
              </div>
  
              <div class="mb-3">
                <label for="">Precio base: </label>
                <input required type="number"
                  class="form-control" formControlName="precioBase" name="" id="precioBase" aria-describedby="helpId" placeholder="Define el precio base por el cual los usuarios van a empezar a ofertar">
            </div>
            
          
              <div class="mb-3">
                  <label for="">Fecha y hora de finalización: </label>
                  <input required id="fechafinalizacion" type="datetime-local" value="{{fechafinalizacion}}" formControlName = "fechafinalizacion">
              </div>
  
  
              <div class="mb-3">
                <label for="">Foto:</label>
                <input required type = "file" accept="image/*" (change)="seleccionarArchivo($event)" formControlName = "foto" name = "" id = "foto">
                <img *ngIf="imagenPrevisualizacion" src="data:image/png;base64,{{imagenPrevisualizacion}}">
              </div>
  
            
    
  
              <div class="btn-group" role="group" aria-label="">
                  <button type="submit" class="btn btn-outline-primary">Agregar</button>
                  <button type="button" class="btn btn-outline-secondary" routerLink="/listar-usuario">Cancelar</button>
              </div>
          </form>
      </div>
      
  </div>

  <div class="apartado-ofertas">
    <div class = "informacion">
      <h4>{{nombre}}</h4>
      <p>{{descripcion}}</p>
      <h6>Precio actual: ${{precioActual}}</h6>
      <p>Especificaciones:</p>
      <ul>
        <li>
          Marca: {{marca}}
        </li>
        <li>
          Modelo: {{modelo}}
        </li>
        <li>
          Precio Base: ${{precioBase}}
        </li>
        <li>
          Fecha de inicio: {{fechainicio}}
        </li>
        <li>
          Fecha de finalización: {{fechafinalizacion}}
        </li>
      </ul>
  
      
    </div>
    <div class = "div-img-oferta">
      <img class = "img-oferta" *ngIf="imagenPrevisualizacion" src="data:image/png;base64,{{imagenPrevisualizacion}}">
    </div>
    
    
  </div>

  <div class = "apartado-ofertantes">
    <h4>Ofertantes</h4>
    <div class = "ofertar">
      <input required type="number" class="form-control" formControlName="" name="" id="" aria-describedby="helpId" placeholder="Realiza una oferta">
      <button type="submit" class="btn btn-info">Ofertar</button>
    </div>
    <table class="tabla" *ngFor="let oferta of Ofertas; let iControl=index">
      <tbody>
        <tr>
          <td><img src="../../../assets/subasta.png" class = "img-subastas"></td>
          <td>{{oferta.idUsuario}}</td>
          <td>${{oferta.precio}}</td>
        </tr>
      
       
      </tbody>
    </table>
  </div>

 
  
  </div>